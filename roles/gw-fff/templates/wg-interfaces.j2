auto {{ item.iface }}

{% if item.value.ip6_address is defined and item.value.ip6_address|length %}
iface {{ item.iface }} inet6 static
	address {{ item.value.ip6_address }}

	# initialize wireguard
	pre-up ip link add $IFACE type wireguard
	pre-up wg setconf $IFACE /etc/wireguard/$IFACE.conf
	post-down ip link del $IFACE

{% endif %}

{% if item.value.ip4_address is defined and item.value.ip4_address|length %}
iface {{ item.iface }} inet static
	address {{ item.value.ip4_address }}
	scope link

{% endif %}
